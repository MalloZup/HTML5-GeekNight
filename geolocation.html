<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Geolocation</title>
    <link href='css/common.css' rel='stylesheet' type='text/css' />
    <link href='css/geolocation.css' rel='stylesheet' type='text/css' />
  </head>
  <body>
    <header>
      <hgroup>
        <h1>Geolocation</h1>
        <h2>Getting the current location</h2>
      </hgroup>
    </header>
    <section>
      <section>
        <dl class='position'>
          <dt>Latitude</dt>
          <dd class='latitude'></dd>
          <dt>Longitude</dt>
          <dd class='longitude'></dd>
          <dt>Accuracy</dt>
          <dd class='accuracy'></dd>
        </dl>
        <button class='go'>Go</button>
      </section>
      <aside>
        <ul>
          <li>navigator</li>
          <li>getCurrentPosition</li>
          <li>latitude</li>
          <li>longitude</li>
          <li>altitude</li>
          <li>accuracy</li>
          <li>altitudeAccuracy</li>
          <li>heading</li>
          <li>speed</li>
          <li>timestamp</li>
          <li>watchPosition</li>
        </ul>
      </aside>
    </section>
    <footer>
      <h1>Links</h1>
      <ul>
        <li>
          <a href='http://www.w3.org/TR/geolocation-API/'>Spec</a>
        </li>
      </ul>
    </footer>
    <script type='text/javascript'>
      //<![CDATA[
        // WGS84
        function successCallback(position) {
          document.querySelector("dl.position > dd.latitude").innerHTML = position.coords.latitude;
          document.querySelector("dl.position > dd.longitude").innerHTML = position.coords.longitude;
          document.querySelector("dl.position > dd.accuracy").innerHTML = position.coords.accuracy;
        }
        function errorCallback(error) {
          alert(error.message + " : " + error.code);
        }
        document.querySelector("button.go").addEventListener('click', function(e) {
          navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
        }, false);
      //]]>
    </script>
  </body>
</html>
